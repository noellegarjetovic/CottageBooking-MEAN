<app-meni-vlasnik></app-meni-vlasnik>
<div class="container">
  <h2>Statistika ostvarenih rezervacija</h2>

  <!-- Loading -->
  <div *ngIf="ucitavanje" class="loading">
    <p>Učitavanje statistike...</p>
  </div>

  <!-- Greška -->
  <div *ngIf="greska" class="error">
    <p>{{ greska }}</p>
  </div>

  <!-- Grafikoni -->
  <div *ngIf="!ucitavanje && !greska" class="charts">
    
    <!-- Poruka ako nema podataka -->
    <div *ngIf="vikendice.length === 0" class="no-data">
      <p>Nemate vikendice za prikaz statistike.</p>
    </div>

    <div *ngIf="vikendice.length > 0">
      
      <!-- Grafikoni za svaku vikendicu -->
      <div *ngFor="let vikendica of vikendice" class="vikendica-charts">
        <div class="vikendica-header">
          <h3>{{ vikendica.naziv }}</h3>
          <p class="rezervacije-count">
            <strong>Ukupno ostvarenih rezervacija:</strong> 
            {{ getBrojOstvarenihRezervacijaZaVikendicu(vikendica.naziv) }}
          </p>
        </div>
        
        <div class="charts-row">
          <!-- Bar Chart -->
          <div class="chart-container">
            <h4>Ostvarene rezervacije po mesecima</h4>
            <div class="chart-wrapper">
              <canvas [id]="'barChart_' + vikendica.naziv" width="400" height="300"></canvas>
            </div>
          </div>

          <!-- Pie Chart -->
          <div class="chart-container">
            <h4>Raspodela dana (vikend vs radni)</h4>
            <div class="chart-wrapper">
              <canvas [id]="'pieChart_' + vikendica.naziv" width="300" height="300"></canvas>
            </div>
            <div class="chart-stats">
              <p><strong>Ukupno dana:</strong> {{ getUkupnoDanaZaVikendicu(vikendica.naziv) }}</p>
              <p><strong>Vikend dana:</strong> {{ getVikendDanaZaVikendicu(vikendica.naziv) }}</p>
              <p><strong>Radni dani:</strong> {{ getRadniDaniZaVikendicu(vikendica.naziv) }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>